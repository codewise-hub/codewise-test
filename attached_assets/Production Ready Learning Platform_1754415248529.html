<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodewiseHub - Production Ready Learning Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="https://unpkg.com/blockly/blocks_compressed.js"></script>
    <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
    <script src="https://unpkg.com/blockly/msg/en.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .kid-gradient {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
        }
        
        .teen-gradient {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .bounce-animation {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .blockly-container {
            height: 300px;
            width: 100%;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .course-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            stroke-dasharray: 251.2;
            stroke-dashoffset: 251.2;
            transition: stroke-dashoffset 0.5s ease;
        }
        
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }
        
        .robot-simulator {
            background: #f8fafc;
            border: 2px dashed #cbd5e0;
            height: 200px;
            position: relative;
            overflow: hidden;
        }
        
        .robot-avatar {
            width: 40px;
            height: 40px;
            background: #4299e1;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            transition: all 0.5s ease;
        }
        
        .auth-container {
            display: none;
        }
        
        .auth-container.active {
            display: block;
        }
        
        .user-profile {
            display: none;
        }
        
        .user-profile.active {
            display: block;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.success {
            background: #10b981;
        }
        
        .notification.error {
            background: #ef4444;
        }
        
        .notification.info {
            background: #3b82f6;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .curriculum-item {
            border-left: 4px solid #3b82f6;
            padding-left: 16px;
            margin-bottom: 12px;
        }
        
        .curriculum-item.completed {
            border-left-color: #10b981;
        }
        
        .curriculum-item.in-progress {
            border-left-color: #f59e0b;
        }
        
        .ai-chat-container {
            height: 250px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            background: white;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-indicator.online {
            background: #10b981;
        }
        
        .status-indicator.offline {
            background: #ef4444;
        }
        
        .status-indicator.connecting {
            background: #f59e0b;
            animation: pulse 1s infinite;
        }
        
         {
            .no-print {
                display: none !important;
            }
            
            body {
                font-size: 12px;
            }
            
            .course-card {
                break-inside: avoid;
            }
            
            .chart-container {
                height: 200px;
            }
            
            .blockly-container {
                height: 200px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-lg">
                            <i class="fas fa-code"></i>
                        </div>
                        <span class="ml-2 text-xl font-bold text-gray-800">CodewiseHub</span>
                        <span id="connectionStatus" class="ml-4 text-sm text-gray-600">
                            <span class="status-indicator connecting"></span>
                            Connecting...
                        </span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="authContainer" class="auth-container">
                        <button id="signInBtn" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition">
                            <i class="fas fa-sign-in-alt mr-2"></i>Sign In
                        </button>
                    </div>
                    <div id="userProfile" class="user-profile flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-gray-600"></i>
                        </div>
                        <span id="userEmail" class="text-sm text-gray-700"></span>
                        <button id="signOutBtn" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-6">
                    Explore. Learn. Code.
                    <span class="block text-yellow-300">Together!</span>
                </h1>
                <p class="text-xl text-white mb-8 max-w-3xl mx-auto">
                    Dive into fun, interactive coding adventures designed for young minds. 
                    Build amazing projects, learn with AI, and become a coding hero!
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="startLearningBtn" class="bg-yellow-400 text-purple-800 px-8 py-4 rounded-full font-bold text-lg hover:bg-yellow-300 transition bounce-animation">
                        <i class="fas fa-rocket mr-2"></i>Start Learning Now
                    </button>
                    <button id="watchDemoBtn" class="bg-white text-purple-800 px-8 py-4 rounded-full font-bold text-lg hover:bg-gray-100 transition">
                        <i class="fas fa-play mr-2"></i>Watch Demo
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Your Learning Dashboard</h2>
                <p class="text-lg text-gray-600">Track your progress and achievements</p>
            </div>

            <div class="dashboard-grid">
                <!-- Progress Overview -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Overall Progress</h3>
                    <div class="flex items-center justify-between mb-4">
                        <div class="relative w-24 h-24">
                            <svg class="w-full h-full progress-ring">
                                <circle cx="48" cy="48" r="32" stroke="#e5e7eb" stroke-width="6" fill="none"/>
                                <circle id="progressCircle" cx="48" cy="48" r="32" stroke="#10b981" stroke-width="6" fill="none" class="progress-ring-circle"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span id="progressText" class="text-lg font-bold text-gray-800">0%</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-bold text-gray-800" id="totalLessons">0</p>
                            <p class="text-sm text-gray-600">Lessons Completed</p>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>Courses</span>
                            <span id="coursesProgress">0/10</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="coursesProgressBar" class="bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Projects</span>
                            <span id="projectsProgress">0/5</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="projectsProgressBar" class="bg-green-500 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Learning Statistics -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Learning Statistics</h3>
                    <div class="chart-container">
                        <canvas id="learningChart"></canvas>
                    </div>
                </div>

                <!-- Recent Achievements -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Recent Achievements</h3>
                    <div id="achievementsList" class="space-y-3">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white text-sm mr-3">
                                <i class="fas fa-star"></i>
                            </div>
                            <div>
                                <p class="font-medium">Getting Started</p>
                                <p class="text-sm text-gray-600">Completed registration</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Curriculum Section -->
    <section class="py-16 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Interactive Curriculum</h2>
                <p class="text-lg text-gray-600">Explore courses tailored to your learning journey</p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Course List -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-gray-800">Available Courses</h3>
                        <div id="coursesList" class="space-y-4">
                            <div class="flex items-center justify-center py-8">
                                <div class="loading-spinner mr-3"></div>
                                <span class="text-gray-600">Loading courses...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Course Details -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Course Details</h3>
                    <div id="courseDetails">
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-book text-4xl mb-4"></i>
                            <p>Select a course to view details</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Coding Lab -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Interactive Coding Lab</h2>
                <p class="text-lg text-gray-600">Practice coding with visual programming blocks</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Blockly Editor -->
                <div class="bg-gray-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Visual Programming Editor</h3>
                    <div id="blocklyDiv" class="blockly-container mb-4"></div>
                    <div class="flex gap-4 flex-wrap">
                        <button id="runCodeBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition">
                            <i class="fas fa-play mr-2"></i>Run Code
                        </button>
                        <button id="saveCodeBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition">
                            <i class="fas fa-save mr-2"></i>Save Project
                        </button>
                        <button id="clearCodeBtn" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition">
                            <i class="fas fa-trash mr-2"></i>Clear
                        </button>
                    </div>
                </div>

                <!-- Output Area -->
                <div class="bg-gray-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Output & Results</h3>
                    <div id="output" class="bg-white rounded-lg p-4 h-64 border-2 border-gray-200 mb-4 font-mono text-sm">
                        <p class="text-gray-500 italic">Your code output will appear here...</p>
                    </div>
                    <div class="flex gap-4 flex-wrap">
                        <button id="showTutorialBtn" class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition">
                            <i class="fas fa-question-circle mr-2"></i>Tutorial
                        </button>
                        <button id="showExamplesBtn" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition">
                            <i class="fas fa-lightbulb mr-2"></i>Examples
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Robot Programming -->
    <section class="py-16 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Robot Programming</h2>
                <p class="text-lg text-gray-600">Program virtual robots with visual blocks</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Robot Programming -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Robot Programming</h3>
                    <div id="robotBlocklyDiv" class="blockly-container mb-4"></div>
                    <div class="flex gap-4 flex-wrap">
                        <button id="runRobotBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition">
                            <i class="fas fa-robot mr-2"></i>Run Robot
                        </button>
                        <button id="resetRobotBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition">
                            <i class="fas fa-redo mr-2"></i>Reset
                        </button>
                    </div>
                </div>

                <!-- Robot Simulator -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Robot Simulator</h3>
                    <div id="robotSimulator" class="robot-simulator rounded-lg">
                        <div id="robotAvatar" class="robot-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="absolute inset-0 opacity-20" style="background-image: linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px); background-size: 20px 20px;"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-gray-600">Program your robot to move and complete challenges!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Learning Assistant -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">AI Learning Assistant</h2>
                <p class="text-lg text-gray-600">Get personalized help and generate custom content</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- AI Chat Interface -->
                <div class="bg-gray-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Chat with AI Tutor</h3>
                    <div id="aiChatContainer" class="ai-chat-container mb-4">
                        <div class="flex items-start mb-4">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm mr-3">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="bg-blue-100 rounded-lg p-3 max-w-sm">
                                <p class="text-sm">Hi! I'm your AI coding tutor. Ask me anything about programming, or request study materials!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="aiChatInput" placeholder="Ask me anything about coding..." class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button id="sendMessageBtn" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <!-- AI Content Generator -->
                <div class="bg-gray-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">AI Content Generator</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Content Type</label>
                            <select id="contentType" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="lesson">Study Lesson</option>
                                <option value="quiz">Practice Quiz</option>
                                <option value="project">Project Ideas</option>
                                <option value="tutorial">Tutorial</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Topic</label>
                            <input type="text" id="contentTopic" placeholder="e.g., JavaScript loops, HTML basics..." class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Age Group</label>
                            <select id="ageGroup" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="kids">Ages 6-11</option>
                                <option value="teens">Ages 12-18</option>
                            </select>
                        </div>
                        <button id="generateContentBtn" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600 transition">
                            <i class="fas fa-magic mr-2"></i>Generate Content
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- System Status -->
    <section class="py-8 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">System Status</h2>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl mb-2">
                        <i class="fas fa-database text-blue-500"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Database</h3>
                    <p id="databaseStatus" class="text-sm text-gray-600">
                        <span class="status-indicator connecting"></span>
                        Connecting...
                    </p>
                </div>
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl mb-2">
                        <i class="fas fa-shield-alt text-green-500"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Authentication</h3>
                    <p id="authStatus" class="text-sm text-gray-600">
                        <span class="status-indicator connecting"></span>
                        Connecting...
                    </p>
                </div>
                <div class="bg-white rounded-lg shadow p-6 text-center">
                    <div class="text-3xl mb-2">
                        <i class="fas fa-cloud text-purple-500"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Storage</h3>
                    <p id="storageStatus" class="text-sm text-gray-600">
                        <span class="status-indicator connecting"></span>
                        Connecting...
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">CodewiseHub</h3>
                    <p class="text-gray-400">Empowering the next generation with coding education and AI-powered learning.</p>
                </div>
                <div>
                    <h4 class="text-md font-semibold mb-4">Features</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>Interactive Coding</li>
                        <li>AI-Powered Learning</li>
                        <li>Progress Tracking</li>
                        <li>Robot Programming</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-md font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>Documentation</li>
                        <li>Tutorials</li>
                        <li>Community</li>
                        <li>Support</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-md font-semibold mb-4">Connect</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-discord text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 CodewiseHub. All rights reserved. | Version 1.0 | Firebase Integration Active</p>
            </div>
        </div>
    </footer>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD9Hc-DuH8jXk7X8686A2o2jbvPqVd77no",
            authDomain: "codewise-hub-production.firebaseapp.com",
            projectId: "codewise-hub-production",
            storageBucket: "codewise-hub-production.firebasestorage.app",
            messagingSenderId: "1067822471514",
            appId: "1:1067822471514:web:4ac831dede5b3bf49afb63",
            measurementId: "G-189VFGNKXS"
        };

        // Initialize Firebase
        try {
            firebase.initializeApp(firebaseConfig);
            console.log('Firebase initialized successfully');
        } catch (error) {
            console.error('Firebase initialization error:', error);
        }

        // Initialize Firebase services
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();

        // Global variables
        let workspace;
        let robotWorkspace;
        let currentUser = null;
        let userProgress = {
            lessons: 0,
            courses: 0,
            projects: 0,
            totalScore: 0
        };
        let curriculumData = [];
        let learningChart = null;

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        async function initializeApp() {
            try {
                // Initialize UI components
                initializeBlockly();
                initializeRobotBlockly();
                setupEventListeners();
                
                // Check Firebase connection
                await checkFirebaseConnection();
                
                // Load initial data
                await loadCurriculumData();
                await loadUserProgress();
                
                // Initialize charts
                initializeCharts();
                
                // Set up authentication
                setupAuthentication();
                
                showNotification('Application initialized successfully!', 'success');
            } catch (error) {
                console.error('App initialization error:', error);
                showNotification('Failed to initialize application. Please refresh the page.', 'error');
            }
        }

        async function checkFirebaseConnection() {
            try {
                // Test database connection
                await db.collection('test').limit(1).get();
                updateStatus('databaseStatus', 'Connected', 'online');
                
                // Test authentication
                auth.onAuthStateChanged(() => {
                    updateStatus('authStatus', 'Active', 'online');
                });
                
                // Test storage
                const storageRef = storage.ref();
                await storageRef.child('test').getDownloadURL().catch(() => {
                    // This is expected to fail for non-existent file
                    updateStatus('storageStatus', 'Connected', 'online');
                });
                
                updateStatus('connectionStatus', 'Connected', 'online');
            } catch (error) {
                console.error('Firebase connection error:', error);
                updateStatus('connectionStatus', 'Connection Error', 'offline');
                updateStatus('databaseStatus', 'Error', 'offline');
                updateStatus('authStatus', 'Error', 'offline');
                updateStatus('storageStatus', 'Error', 'offline');
            }
        }

        function updateStatus(elementId, text, status) {
            const element = document.getElementById(elementId);
            if (element) {
                const indicator = element.querySelector('.status-indicator');
                if (indicator) {
                    indicator.className = `status-indicator ${status}`;
                }
                element.innerHTML = element.innerHTML.replace(/Connected|Connecting|Error|Active|Connection Error/, text);
            }
        }

        function setupAuthentication() {
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    currentUser = user;
                    document.getElementById('authContainer').classList.remove('active');
                    document.getElementById('userProfile').classList.add('active');
                    document.getElementById('userEmail').textContent = user.email || 'Anonymous User';
                    
                    await loadUserProgress();
                    await loadUserAchievements();
                    
                    showNotification('Welcome back!', 'success');
                } else {
                    currentUser = null;
                    document.getElementById('authContainer').classList.add('active');
                    document.getElementById('userProfile').classList.remove('active');
                    
                    // Sign in anonymously for demo
                    try {
                        await auth.signInAnonymously();
                    } catch (error) {
                        console.error('Anonymous sign in error:', error);
                    }
                }
            });
        }

        async function loadCurriculumData() {
            try {
                const snapshot = await db.collection('curriculum').orderBy('order').get();
                curriculumData = [];
                snapshot.forEach(doc => {
                    curriculumData.push({ id: doc.id, ...doc.data() });
                });
                
                if (curriculumData.length === 0) {
                    // Load default curriculum if none exists
                    await loadDefaultCurriculum();
                }
                
                displayCurriculum();
            } catch (error) {
                console.error('Error loading curriculum:', error);
                await loadDefaultCurriculum();
                displayCurriculum();
            }
        }

        async function loadDefaultCurriculum() {
            const defaultCourses = [
                {
                    id: 'web-development',
                    title: 'Web Development Basics',
                    description: 'Learn HTML, CSS, and JavaScript fundamentals',
                    level: 'beginner',
                    ageGroup: 'teens',
                    duration: '8 lessons',
                    category: 'web',
                    color: 'orange',
                    icon: 'fas fa-globe',
                    lessons: [
                        { id: 'lesson-1', title: 'HTML Basics', duration: '15 min', order: 1 },
                        { id: 'lesson-2', title: 'CSS Styling', duration: '20 min', order: 2 },
                        { id: 'lesson-3', title: 'JavaScript Introduction', duration: '25 min', order: 3 }
                    ],
                    order: 1
                },
                {
                    id: 'block-programming',
                    title: 'Block Programming for Kids',
                    description: 'Learn programming concepts with visual blocks',
                    level: 'beginner',
                    ageGroup: 'kids',
                    duration: '6 lessons',
                    category: 'blocks',
                    color: 'purple',
                    icon: 'fas fa-puzzle-piece',
                    lessons: [
                        { id: 'lesson-1', title: 'Getting Started', duration: '10 min', order: 1 },
                        { id: 'lesson-2', title: 'Making Moves', duration: '15 min', order: 2 },
                        { id: 'lesson-3', title: 'Loops and Repetition', duration: '20 min', order: 3 }
                    ],
                    order: 2
                },
                {
                    id: 'robot-programming',
                    title: 'Robot Programming',
                    description: 'Program virtual robots to complete challenges',
                    level: 'intermediate',
                    ageGroup: 'both',
                    duration: '5 lessons',
                    category: 'robotics',
                    color: 'blue',
                    icon: 'fas fa-robot',
                    lessons: [
                        { id: 'lesson-1', title: 'Robot Basics', duration: '12 min', order: 1 },
                        { id: 'lesson-2', title: 'Movement Commands', duration: '18 min', order: 2 },
                        { id: 'lesson-3', title: 'Sensor Programming', duration: '22 min', order: 3 }
                    ],
                    order: 3
                }
            ];
            
            curriculumData = defaultCourses;
        }

        function displayCurriculum() {
            const coursesList = document.getElementById('coursesList');
            coursesList.innerHTML = '';
            
            curriculumData.forEach(course => {
                const courseElement = document.createElement('div');
                courseElement.className = 'curriculum-item cursor-pointer p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition';
                courseElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-${course.color}-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="${course.icon} text-${course.color}-600 text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800">${course.title}</h4>
                                <p class="text-sm text-gray-600">${course.description}</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="text-xs bg-gray-100 px-2 py-1 rounded">${course.level}</span>
                                    <span class="text-xs text-gray-500">${course.duration}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <button class="bg-${course.color}-500 text-white px-4 py-2 rounded-lg hover:bg-${course.color}-600 transition">
                                Start Course
                            </button>
                        </div>
                    </div>
                `;
                
                courseElement.addEventListener('click', () => showCourseDetails(course));
                coursesList.appendChild(courseElement);
            });
        }

        function showCourseDetails(course) {
            const courseDetails = document.getElementById('courseDetails');
            courseDetails.innerHTML = `
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-${course.color}-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="${course.icon} text-${course.color}-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">${course.title}</h3>
                        <p class="text-gray-600 mb-4">${course.description}</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <strong>Level:</strong> ${course.level}
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <strong>Duration:</strong> ${course.duration}
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <strong>Age Group:</strong> ${course.ageGroup}
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <strong>Category:</strong> ${course.category}
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-bold text-gray-800 mb-2">Lessons</h4>
                        <div class="space-y-2">
                            ${course.lessons.map(lesson => `
                                <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-play-circle text-green-500 mr-2"></i>
                                        <span class="text-sm">${lesson.title}</span>
                                    </div>
                                    <span class="text-xs text-gray-500">${lesson.duration}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <button class="w-full bg-${course.color}-500 text-white py-3 rounded-lg hover:bg-${course.color}-600 transition" onclick="startCourse('${course.id}')">
                        <i class="fas fa-play mr-2"></i>Start Course
                    </button>
                </div>
            `;
        }

        async function startCourse(courseId) {
            try {
                if (currentUser) {
                    await saveCurriculumProgress(courseId, 'started', 10);
                }
                
                userProgress.courses++;
                updateProgress();
                updateUserAchievements('courseStarted', courseId);
                
                showNotification(`Started course: ${courseId}`, 'success');
            } catch (error) {
                console.error('Error starting course:', error);
                showNotification('Failed to start course. Please try again.', 'error');
            }
        }

        async function saveCurriculumProgress(courseId, status, progress) {
            if (!currentUser) return;
            
            try {
                await db.collection('userProgress').doc(currentUser.uid).set({
                    [`${courseId}`]: {
                        status: status,
                        progress: progress,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    }
                }, { merge: true });
            } catch (error) {
                console.error('Error saving progress:', error);
            }
        }

        async function loadUserProgress() {
            if (!currentUser) return;
            
            try {
                const doc = await db.collection('userProgress').doc(currentUser.uid).get();
                if (doc.exists) {
                    const data = doc.data();
                    userProgress.lessons = Object.keys(data).length;
                    userProgress.totalScore = Object.values(data).reduce((sum, item) => sum + (item.progress || 0), 0);
                }
                updateProgress();
            } catch (error) {
                console.error('Error loading progress:', error);
            }
        }

        function updateProgress() {
            const totalLessons = curriculumData.reduce((sum, course) => sum + course.lessons.length, 0);
            const completedLessons = userProgress.lessons;
            const percentage = totalLessons > 0 ? (completedLessons / totalLessons) * 100 : 0;
            
            document.getElementById('progressText').textContent = Math.round(percentage) + '%';
            document.getElementById('totalLessons').textContent = completedLessons;
            document.getElementById('coursesProgress').textContent = `${userProgress.courses}/10`;
            document.getElementById('projectsProgress').textContent = `${userProgress.projects}/5`;
            
            // Update progress bars
            document.getElementById('coursesProgressBar').style.width = `${(userProgress.courses / 10) * 100}%`;
            document.getElementById('projectsProgressBar').style.width = `${(userProgress.projects / 5) * 100}%`;
            
            // Update progress circle
            const circle = document.getElementById('progressCircle');
            const circumference = 2 * Math.PI * 32;
            const offset = circumference - (percentage / 100) * circumference;
            circle.style.strokeDashoffset = offset;
        }

        function initializeCharts() {
            const ctx = document.getElementById('learningChart').getContext('2d');
            learningChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Lessons Completed',
                        data: [2, 3, 1, 4, 2, 5, 3],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Time Spent (hours)',
                        data: [1.5, 2.2, 0.8, 3.1, 1.7, 4.2, 2.5],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function initializeBlockly() {
            workspace = Blockly.inject('blocklyDiv', {
                toolbox: `
                <xml>
                    <category name="Logic" colour="210">
                        <block type="controls_if"></block>
                        <block type="logic_compare"></block>
                        <block type="logic_operation"></block>
                        <block type="logic_boolean"></block>
                    </category>
                    <category name="Loops" colour="120">
                        <block type="controls_repeat_ext"></block>
                        <block type="controls_for"></block>
                    </category>
                    <category name="Math" colour="230">
                        <block type="math_number"></block>
                        <block type="math_arithmetic"></block>
                    </category>
                    <category name="Text" colour="160">
                        <block type="text"></block>
                        <block type="text_print"></block>
                    </category>
                    <category name="Variables" colour="330">
                        <block type="variables_set"></block>
                        <block type="variables_get"></block>
                    </category>
                </xml>
                `,
                grid: {
                    spacing: 20,
                    length: 3,
                    colour: '#ccc',
                    snap: true
                },
                zoom: {
                    controls: true,
                    wheel: true,
                    startScale: 1.0,
                    maxScale: 3,
                    minScale: 0.3,
                    scaleSpeed: 1.2
                }
            });
        }

        function initializeRobotBlockly() {
            robotWorkspace = Blockly.inject('robotBlocklyDiv', {
                toolbox: `
                <xml>
                    <category name="Movement" colour="120">
                        <block type="robot_move_forward"></block>
                        <block type="robot_turn_left"></block>
                        <block type="robot_turn_right"></block>
                    </category>
                    <category name="Control" colour="290">
                        <block type="controls_repeat_ext"></block>
                        <block type="controls_if"></block>
                    </category>
                </xml>
                `,
                grid: {
                    spacing: 20,
                    length: 3,
                    colour: '#ccc',
                    snap: true
                },
                zoom: {
                    controls: true,
                    wheel: true,
                    startScale: 1.0,
                    maxScale: 3,
                    minScale: 0.3,
                    scaleSpeed: 1.2
                }
            });

            defineRobotBlocks();
        }

        function defineRobotBlocks() {
            Blockly.Blocks['robot_move_forward'] = {
                init: function() {
                    this.appendDummyInput()
                        .appendField(" Move Forward");
                    this.setPreviousStatement(true, null);
                    this.setNextStatement(true, null);
                    this.setColour(120);
                    this.setTooltip("Move the robot forward one step");
                }
            };

            Blockly.Blocks['robot_turn_left'] = {
                init: function() {
                    this.appendDummyInput()
                        .appendField(" Turn Left");
                    this.setPreviousStatement(true, null);
                    this.setNextStatement(true, null);
                    this.setColour(120);
                    this.setTooltip("Turn the robot left");
                }
            };

            Blockly.Blocks['robot_turn_right'] = {
                init: function() {
                    this.appendDummyInput()
                        .appendField(" Turn Right");
                    this.setPreviousStatement(true, null);
                    this.setNextStatement(true, null);
                    this.setColour(120);
                    this.setTooltip("Turn the robot right");
                }
            };

            Blockly.JavaScript['robot_move_forward'] = function(block) {
                return 'moveRobotForward();\n';
            };

            Blockly.JavaScript['robot_turn_left'] = function(block) {
                return 'turnRobotLeft();\n';
            };

            Blockly.JavaScript['robot_turn_right'] = function(block) {
                return 'turnRobotRight();\n';
            };
        }

        function setupEventListeners() {
            // Authentication
            document.getElementById('signInBtn').addEventListener('click', async () => {
                try {
                    await auth.signInAnonymously();
                    showNotification('Signed in successfully!', 'success');
                } catch (error) {
                    console.error('Sign in error:', error);
                    showNotification('Sign in failed. Please try again.', 'error');
                }
            });

            document.getElementById('signOutBtn').addEventListener('click', async () => {
                try {
                    await auth.signOut();
                    showNotification('Signed out successfully!', 'info');
                } catch (error) {
                    console.error('Sign out error:', error);
                }
            });

            // Coding Lab
            document.getElementById('runCodeBtn').addEventListener('click', runCode);
            document.getElementById('saveCodeBtn').addEventListener('click', saveCode);
            document.getElementById('clearCodeBtn').addEventListener('click', clearCode);
            document.getElementById('showTutorialBtn').addEventListener('click', showTutorial);
            document.getElementById('showExamplesBtn').addEventListener('click', showExamples);

            // Robot Programming
            document.getElementById('runRobotBtn').addEventListener('click', runRobotCode);
            document.getElementById('resetRobotBtn').addEventListener('click', resetRobot);

            // AI Assistant
            document.getElementById('sendMessageBtn').addEventListener('click', sendAIMessage);
            document.getElementById('aiChatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendAIMessage();
                }
            });
            document.getElementById('generateContentBtn').addEventListener('click', generateContent);

            // Hero buttons
            document.getElementById('startLearningBtn').addEventListener('click', () => {
                document.getElementById('coursesList').scrollIntoView({ behavior: 'smooth' });
            });
            document.getElementById('watchDemoBtn').addEventListener('click', () => {
                showNotification('Demo video coming soon!', 'info');
            });
        }

        function runCode() {
            const code = Blockly.JavaScript.workspaceToCode(workspace);
            const output = document.getElementById('output');
            
            try {
                const originalConsoleLog = console.log;
                let outputText = '';
                
                console.log = function(...args) {
                    outputText += args.join(' ') + '\n';
                };
                
                eval(code);
                console.log = originalConsoleLog;
                
                output.innerHTML = outputText || 'Code executed successfully!';
                
                if (currentUser) {
                    userProgress.projects++;
                    updateProgress();
                    updateUserAchievements('codeExecuted');
                }
            } catch (error) {
                output.innerHTML = `<span class="text-red-500">Error: ${error.message}</span>`;
            }
        }

        function runRobotCode() {
            const code = Blockly.JavaScript.workspaceToCode(robotWorkspace);
            
            try {
                eval(code);
                if (currentUser) {
                    updateUserAchievements('robotProgrammed');
                }
            } catch (error) {
                console.error('Robot code error:', error);
                showNotification('Robot code error. Please check your blocks.', 'error');
            }
        }

        // Robot movement functions
        let robotPosition = { x: 50, y: 50 };
        let robotDirection = 0;

        function moveRobotForward() {
            const robot = document.getElementById('robotAvatar');
            const step = 30;
            
            switch(robotDirection) {
                case 0: // Right
                    robotPosition.x = Math.min(robotPosition.x + step, 85);
                    break;
                case 90: // Down
                    robotPosition.y = Math.min(robotPosition.y + step, 85);
                    break;
                case 180: // Left
                    robotPosition.x = Math.max(robotPosition.x - step, 15);
                    break;
                case 270: // Up
                    robotPosition.y = Math.max(robotPosition.y - step, 15);
                    break;
            }
            
            robot.style.left = robotPosition.x + '%';
            robot.style.top = robotPosition.y + '%';
            robot.style.transform = `translate(-50%, -50%) rotate(${robotDirection}deg)`;
        }

        function turnRobotLeft() {
            robotDirection = (robotDirection + 270) % 360;
            const robot = document.getElementById('robotAvatar');
            robot.style.transform = `translate(-50%, -50%) rotate(${robotDirection}deg)`;
        }

        function turnRobotRight() {
            robotDirection = (robotDirection + 90) % 360;
            const robot = document.getElementById('robotAvatar');
            robot.style.transform = `translate(-50%, -50%) rotate(${robotDirection}deg)`;
        }

        function resetRobot() {
            robotPosition = { x: 50, y: 50 };
            robotDirection = 0;
            const robot = document.getElementById('robotAvatar');
            robot.style.left = '50%';
            robot.style.top = '50%';
            robot.style.transform = 'translate(-50%, -50%) rotate(0deg)';
        }

        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            setTimeout(() => {
                const response = generateAIResponse(message);
                addChatMessage(response, 'ai');
            }, 1000);
        }

        function addChatMessage(message, sender) {
            const chatContainer = document.getElementById('aiChatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start mb-4';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex-1"></div>
                    <div class="bg-blue-500 text-white rounded-lg p-3 max-w-sm">
                        <p class="text-sm">${message}</p>
                    </div>
                    <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white text-sm ml-3">
                        <i class="fas fa-user"></i>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm mr-3">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="bg-blue-100 rounded-lg p-3 max-w-sm">
                        <p class="text-sm">${message}</p>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const responses = {
                'hello': 'Hello! I\'m here to help you learn coding. What would you like to know?',
                'help': 'I can help you with programming concepts, debugging, creating study materials, and answering questions. Just ask!',
                'javascript': 'JavaScript is a powerful programming language! It\'s used to make websites interactive. Would you like to learn about variables, functions, or something else?',
                'html': 'HTML is the building blocks of websites! It uses tags to structure content. Want to learn about basic HTML tags?',
                'css': 'CSS is used to style websites and make them look beautiful! It controls colors, layouts, fonts, and animations.',
                'python': 'Python is a beginner-friendly programming language that\'s great for learning! It\'s used in web development, data science, and AI.',
                'robot': 'Robot programming is fun! You can control robots using simple commands like move forward, turn left, and turn right. Try the robot challenges!',
                'default': 'That\'s an interesting question! I can help you learn more about programming. Can you be more specific about what you\'d like to know?'
            };
            
            const lowerMessage = userMessage.toLowerCase();
            
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            
            return responses.default;
        }

        function generateContent() {
            const contentType = document.getElementById('contentType').value;
            const topic = document.getElementById('contentTopic').value;
            const ageGroup = document.getElementById('ageGroup').value;
            
            if (!topic) {
                showNotification('Please enter a topic!', 'error');
                return;
            }
            
            const content = createContent(contentType, topic, ageGroup);
            showNotification(`Generated ${contentType} for ${topic}!`, 'success');
            
            // In a real app, this would display the generated content
            console.log('Generated content:', content);
        }

        function createContent(type, topic, age) {
            const ageText = age === 'kids' ? 'Ages 6-11' : 'Ages 12-18';
            const complexity = age === 'kids' ? 'simple' : 'advanced';
            
            return {
                type: type,
                topic: topic,
                ageGroup: ageText,
                complexity: complexity,
                content: `Generated ${type} content for ${topic} suitable for ${ageText} with ${complexity} explanations.`
            };
        }

        function saveCode() {
            const code = Blockly.JavaScript.workspaceToCode(workspace);
            localStorage.setItem('codewise-saved-code', code);
            showNotification('Code saved successfully!', 'success');
        }

        function clearCode() {
            workspace.clear();
            document.getElementById('output').innerHTML = '<p class="text-gray-500 italic">Your code output will appear here...</p>';
        }

        function showTutorial() {
            showNotification('Tutorial: Drag blocks from the left toolbox to the workspace. Connect them to create programs!', 'info');
        }

        function showExamples() {
            showNotification('Try creating a "Hello World" program by dragging a "text print" block and connecting it to a "text" block!', 'info');
        }

        async function updateUserAchievements(achievementType, data = null) {
            if (!currentUser) return;
            
            try {
                const achievement = {
                    type: achievementType,
                    data: data,
                    timestamp: new Date(),
                    title: getAchievementTitle(achievementType),
                    description: getAchievementDescription(achievementType)
                };
                
                await db.collection('userAchievements').doc(currentUser.uid).collection('achievements').add(achievement);
                
                showNotification(`Achievement unlocked: ${achievement.title}!`, 'success');
            } catch (error) {
                console.error('Error updating achievements:', error);
            }
        }

        function getAchievementTitle(type) {
            const titles = {
                'courseStarted': 'Course Explorer',
                'codeExecuted': 'Code Runner',
                'robotProgrammed': 'Robot Commander',
                'firstLogin': 'Welcome Aboard',
                'lessonCompleted': 'Lesson Master'
            };
            return titles[type] || 'Achievement';
        }

        function getAchievementDescription(type) {
            const descriptions = {
                'courseStarted': 'Started your first course',
                'codeExecuted': 'Successfully executed code',
                'robotProgrammed': 'Programmed a robot',
                'firstLogin': 'Joined CodewiseHub',
                'lessonCompleted': 'Completed a lesson'
            };
            return descriptions[type] || 'Great work!';
        }

        async function loadUserAchievements() {
            if (!currentUser) return;
            
            try {
                const snapshot = await db.collection('userAchievements').doc(currentUser.uid).collection('achievements').orderBy('timestamp', 'desc').limit(5).get();
                const achievementsList = document.getElementById('achievementsList');
                
                if (snapshot.empty) {
                    achievementsList.innerHTML = `
                        <div class="text-center py-4 text-gray-500">
                            <i class="fas fa-trophy text-2xl mb-2"></i>
                            <p>No achievements yet. Start learning to unlock achievements!</p>
                        </div>
                    `;
                    return;
                }
                
                achievementsList.innerHTML = '';
                snapshot.forEach(doc => {
                    const achievement = doc.data();
                    const achievementElement = document.createElement('div');
                    achievementElement.className = 'flex items-center mb-3';
                    achievementElement.innerHTML = `
                        <div class="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-white text-sm mr-3">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div>
                            <p class="font-medium">${achievement.title}</p>
                            <p class="text-sm text-gray-600">${achievement.description}</p>
                        </div>
                    `;
                    achievementsList.appendChild(achievementElement);
                });
            } catch (error) {
                console.error('Error loading achievements:', error);
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialize progress on page load
        window.addEventListener('load', function() {
            updateProgress();
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDkPoJVmMiNVW%2BzO%2FQaqg2Wg0BX%2B6zYiT2OQVgx5YeN%2FGOA9C4CxSZy7K2keyMpyLVJSqpjvRAzkw3b6at6m55xU2QNO6pF950dXo7fncNeY6EzOJxfg4Bh4Wn8HBXBN%2FwsD1ePmfLE94fv5dhhUAxTjL3y6tQU8f5khUdPr28G%2FcxbeysaDXESTKcuSDDWGqTKiirlDCEodePrBNVh%2FCwctnunTiJc%2B4ww2zegBh0ihXIY1Wc5itc%2Bal2ouKMIHNkCDc82D6Hn%2F0RCKzK0hLFsDTYypTSM4gU%2BM1wSGVXsJsQWiKPaftQ0xeDFrQDkDt4wtPyifwiXO6S69c2FqKUUmKKih9OKrqKvdY117S4a5ZnyPAygWGZD%2FJc7Qhc4pvXd%2BpmmKzzowkQ7w1OVZwieZp9rd98AxbzqxRGSJnBcJ0h4NdYVoK0kqmZjW%2FmxFoxWMpr%2BevQoQT5QvpL0r3tJ3JK%2BBWIU67BDidYjcGSHsQo3J4FTlGNA0P74DilrYtnCnPVQ2DHVQ7mWt0ZX6NXl4%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDkPoJVmMiNVW+zO/Qaqg2Wg0BX+6zYiT2OQVgx5YeN/GOA9C4CxSZy7K2keyMpyLVJSqpjvRAzkw3b6at6m55xU2QNO6pF950dXo7fncNeY6EzOJxfg4Bh4Wn8HBXBN/wsD1ePmfLE94fv5dhhUAxTjL3y6tQU8f5khUdPr28G/cxbeysaDXESTKcuSDDWGqTKiirlDCEodePrBNVh/CwctnunTiJc+4ww2zegBh0ihXIY1Wc5itc+al2ouKMIHNkCDc82D6Hn/0RCKzK0hLFsDTYypTSM4gU+M1wSGVXsJsQWiKPaftQ0xeDFrQDkDt4wtPyifwiXO6S69c2FqKUUmKKih9OKrqKvdY117S4a5ZnyPAygWGZD/Jc7Qhc4pvXd+pmmKzzowkQ7w1OVZwieZp9rd98AxbzqxRGSJnBcJ0h4NdYVoK0kqmZjW/mxFoxWMpr+evQoQT5QvpL0r3tJ3JK+BWIU67BDidYjcGSHsQo3J4FTlGNA0P74DilrYtnCnPVQ2DHVQ7mWt0ZX6NXl4=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    